{% extends "layout.html" %}
{% block body %}
<div class="card">
    <div class="card-header"><h1>Strategy optimizer</h1></div>
    <div class="card-body">
        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <label class="input-group-text" for="strategySelect">Strategy</label>
          </div>
          <select class="custom-select" id="strategySelect">
            {% for strategy in strategies %}
            <option value={{strategy}}
            {% if strategy == current_strategy %}
                selected="selected"
            {% endif %}>
              {{strategy}}
            </option>
            {% endfor %}
          </select>
        </div>
        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <label class="input-group-text" for="evaluatorsSelect">Evaluators</label>
          </div>
          <select class="custom-select multi-select-element" id="evaluatorsSelect" multiple="multiple">
            {% for evaluator in evaluators %}
            <option value={{evaluator}}
            {% if loop.index == 0 %}
                selected="selected"
            {% endif %}>
              {{evaluator}}
            </option>
            {% endfor %}
          </select>
        </div>
        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <label class="input-group-text" for="timeFramesSelect">Time Frames</label>
          </div>
          <select class="custom-select multi-select-element" id="timeFramesSelect" multiple="multiple">
            {% for timeframe in time_frames %}
            <option value={{timeframe}}
            {% if loop.index == 0 %}
                selected="selected"
            {% endif %}>
              {{timeframe}}
            </option>
            {% endfor %}
          </select>
        </div>
        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <label class="input-group-text" for="risksSelect">Risks</label>
          </div>
          <select class="custom-select multi-select-element" id="risksSelect" multiple="multiple">
            {% for risk in risks %}
            <option value={{risk}}
            {% if loop.index == 0 %}
                selected="selected"
            {% endif %}>
              {{risk}}
            </option>
            {% endfor %}
          </select>
        </div>
        <h2>Number of simulations <span id="numberOfSimulatons" class="badge badge-light">10</span></h2>
        <div class='progress' id='progess_bar' style='display: none;'>
            <div class='progress-bar progress-bar-striped bg-danger progress-bar-animated' role='progressbar' aria-valuenow='100' aria-valuemin='0' aria-valuemax='100' style='width: 100%;'></div>
        </div>
        <button id="startOptimizer" type="button" class="btn btn-primary" update-url="{{ url_for('strategy_optimizer', update_type='start_optimizer') }}">Start optimizer</button>
    </div>
</div>

<div id="results_datatable_card" class="card" >
    <div class="card-header"><h2>Results</h2></div>
    <div class="card-body">
        <div class="table-responsive">
          <table id="results_datatable" class="table table-striped table-bordered table-hover"  update-url="{{ url_for('strategy_optimizer', update_type='optimizer_results') }}">
              <caption>Strategy optimizer results</caption>
              <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Evaluators</th>
                    <th scope="col">TimTime Frameses</th>
                    <th scope="col">Risk</th>
                    <th scope="col">Score</th>
                    <th scope="col">Average trades count</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
          </table>
        </div>
    </div>
</div>
{% endblock %}

{% block additional_scripts %}
<script src="{{ url_for('static', filename='js/components/strategy_optimizer.js') }}"></script>
{% endblock additional_scripts %}