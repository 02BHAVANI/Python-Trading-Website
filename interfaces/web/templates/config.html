{% extends "layout.html" %}

{% block body %}
<h1>Configuration</h1>
<nav class="navbar nav-tabs info-color animated slideInDown" >
    <!-- Nav tabs -->
     <ul class="nav mr-auto md-pills nav-justified">
        <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#panelExchanges" role="tab">Exchanges</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#panelEvaluators" role="tab">Evaluators</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#panelTrading" role="tab">Trading</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#panelNotification" role="tab">Notification</a>
        </li>
    </ul>
</nav>

<nav class="navbar nav-tabs alert-primary animated slideInDown">
    Any configuration change will be take into account after OctBot restarts.
    <ul class="nav mx-auto">
        <li class="nav-item" style="padding-right: 5px;">
            <a class="nav-link green" id='save-config' href="#" role="tab">Save</a>
        </li>
        <li class="nav-item">
            <a class="nav-link orange" id='reset-config' href="#" role="tab">Reset</a>
        </li>
    </ul>
    <ul class="nav ml-auto">
        <li class="nav-item">
            <a class="nav-link red" href="{{ url_for('commands', cmd='restart') }}" role="tab">Restart Octobot</a>
        </li>
    </ul>
</nav>

<!-- Tab panels -->
<div class="tab-content">

    <!--Panel Exchanges-->
    <div class="tab-pane fade in show active" id="panelExchanges" role="tabpanel">

    </div>

    <!--Panel Evaluators-->
    <div class="tab-pane fade config-root" id="panelEvaluators" role="tabpanel">

        <div class="row" update-url="{{ url_for('config', update_type='evaluator_config') }}" id="evaluator-config-root">
            {% for i in range(10) %}
            {% for evaluator_name, activated in get_evaluator_config().items() %}
                <a href="#" onclick="return false;" class="list-group-item list-group-item-action col-sm-6 col-md-4 col-lg-3 {{'list-group-item-success' if activated else 'list-group-item-light'}} config-element evaluator-config-element" id={{evaluator_name}} config-key={{evaluator_name}} current-value={{activated}} config-value={{activated}} startup-config-value={{get_evaluator_startup_config()[evaluator_name]}}>{{ evaluator_name }}
                  <span class="float-right">
                    <span class="badge {{'badge-warning' if get_evaluator_startup_config()[evaluator_name] != activated else ('badge-success' if activated else 'badge-secondary')}}">{{('Activation pending restart' if activated else 'Deactivation pending restart') if get_evaluator_startup_config()[evaluator_name] != activated else ('Activated' if activated else 'Deactivated')}}</span>
                  </span>
                </a>
            {% endfor %}
            {% endfor %}
        </div>

    </div>

    <!--Panel Trading-->
    <div class="tab-pane fade" id="panelTrading" role="tabpanel">

    </div>

    <!--Panel Notification-->
    <div class="tab-pane fade" id="panelNotification" role="tabpanel">

    </div>
</div>
{% endblock %}

{% block additional_scripts %}
<script src="{{ url_for('static', filename='js/components/configuration.js') }}"></script>
{% endblock additional_scripts %}